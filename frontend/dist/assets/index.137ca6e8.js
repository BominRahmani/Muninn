(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function p(e,t){return window.go.main.App.SaveNote(e,t)}const i=document.getElementById("capturePopup"),c=document.getElementById("textInput"),l=document.getElementById("attachmentsSection"),u=document.getElementById("fileInput"),h=document.getElementById("pastedIndicator");let s=[];c.addEventListener("input",function(){this.style.height="auto",this.style.height=Math.max(120,this.scrollHeight)+"px"});i.addEventListener("dragover",e=>{e.preventDefault(),i.classList.add("drag-over")});i.addEventListener("dragleave",e=>{i.contains(e.relatedTarget)||i.classList.remove("drag-over")});i.addEventListener("drop",e=>{e.preventDefault(),i.classList.remove("drag-over");const t=Array.from(e.dataTransfer.files);m(t)});document.addEventListener("paste",e=>{const t=e.clipboardData.items,r=[];for(let a of t)a.kind==="file"&&r.push(a.getAsFile());r.length>0&&(m(r),L())});u.addEventListener("change",e=>{const t=Array.from(e.target.files);m(t),u.value=""});function g(){u.click()}function m(e){e.forEach(t=>{const r={id:Date.now()+Math.random(),name:t.name,file:t,type:t.type};s.push(r)}),f()}function v(e){s=s.filter(t=>t.id!==e),f()}function f(){if(s.length===0){l.classList.remove("has-attachments"),l.innerHTML="";return}l.classList.add("has-attachments"),l.innerHTML=s.map(e=>`
        <div class="attachment-item">
            <div class="attachment-icon">${y(e.type)}</div>
            <div class="attachment-name">${e.name}</div>
            <button class="attachment-remove" onclick="removeAttachment(${e.id})">\xD7</button>
        </div>
    `).join("")}function y(e){return e.startsWith("image/")?"\u{1F5BC}\uFE0F":e.includes("pdf")?"\u{1F4C4}":e.includes("text")?"\u{1F4DD}":"\u{1F4CE}"}function L(){h.classList.add("show"),setTimeout(()=>{h.classList.remove("show")},2e3)}async function E(){const e=c.value.trim();if(!(!e&&s.length===0))try{const t=s.map(r=>({fileName:r.name,fileType:r.type,filePath:"",data:null}));p(e,t),c.value="",c.style.height="120px",s=[],f(),console.log("Note saved successfully")}catch(t){console.error("Error saving note:",t)}}document.addEventListener("keydown",e=>{e.key==="Escape"&&console.log("Closing capture popup..."),e.ctrlKey&&e.key==="Enter"&&(e.preventDefault(),E())});window.triggerFileSelect=g;window.removeAttachment=v;setTimeout(()=>c.focus(),100);
